const t=document.querySelector(".speech"),d=document.querySelector(".clean");let i=!1;window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const e=new window.SpeechRecognition;e.interimResults=!0;e.lang="es-ES";let n=document.createElement("p");const c=document.querySelector(".words");c.appendChild(n);e.addEventListener("result",r=>{const p=Array.from(r.results).map(o=>o[0]).map(o=>o.transcript).join("").replace(/poop|poo|shit|dump/gi,"ðŸ’©");n.textContent=p,r.results[0].isFinal&&(n=document.createElement("p"),c.appendChild(n))});const l=()=>{i=!i,i?a():m()},a=()=>{e.start(),e.addEventListener("end",s),t.classList.add("active"),t.innerHTML="Listening... (click to stop)"},m=()=>{e.stop(),e.removeEventListener("end",s),t.classList.remove("active"),t.innerHTML="Start talking"},s=()=>{e.removeEventListener("end",s),a()},u=()=>{c.innerHTML=""};t.addEventListener("click",l);d.addEventListener("click",u);
